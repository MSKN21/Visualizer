{"ast":null,"code":"import _toConsumableArray from\"/home/saikrupananda/vscode/LiveSites/Visualizer/Visualize/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"/home/saikrupananda/vscode/LiveSites/Visualizer/Visualize/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import{wallnodeclr,normalborderclr,normalnodeclr,visited1,visited2,visited3,pathnodeclr}from\"../colors\";import{adjlist,graph_init,pathcolor,visitclr,getweight}from\"./gridsetup\";import{sleep,activateit}from\"../clearfuncs\";var callvisit=function callvisit(i,alldivs,speed,clr){setTimeout(function(){visitclr(i,alldivs,speed,clr);},0);// sleep(20);\n};var callvisit2=function callvisit2(i,alldivs,speed,clr){setTimeout(function(){callvisit(i,alldivs,speed,clr);},0);// sleep(20);\n};var getcoord=function getcoord(x){var val=0;var arr=new Array(2);for(var i=0;i<29;i++){for(var j=0;j<71;j++){val++;if(val==x){arr[0]=i;arr[1]=j;return arr;}}}};var herucalc=function herucalc(a,b){var first=getcoord(a);var last=getcoord(b);var hval=Math.abs(last[1]-first[1])+Math.abs(last[0]-first[0]);return hval;};var sortFunction=function sortFunction(a,b){if(a[0]===b[0]){return 0;}else{return a[0]<b[0]?-1:1;}};var activateit2=function activateit2(alldivs,val,i,speed,clr){setTimeout(function(){return activateit(alldivs,val);},0);setTimeout(function(){return callvisit(i,alldivs,speed,clr);},0);};var propgateimprov=function propgateimprov(v,w,dist,prev,st,visit,dest){var edges=adjlist.get(v);var _iterator=_createForOfIteratorHelper(edges),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var to=_step.value;if(w+to[1]<dist[to[0]]){for(var i=0;i<st.length;i++){if(st[i][1]===dist[to[0]]&&st[i][2]===to[0]){st.splice(i,1);}}dist[to[0]]=w+to[1];prev[to[0]]=v;st.push([dist[to[0]]+herucalc(to[0],dest),dist[to[0]],to[0]]);if(visit[to[0]]){propgateimprov(to[0],w,dist,prev,st,visit,dest);}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}};var startAstar=function startAstar(u,dest,speed,clr){var dist=new Array(2100).fill(50000);var prev=new Array(2100).fill(-1);var visit=new Array(2100).fill(0);var m=herucalc(u,dest);var st=[];var novst=0;var totdst=0;st.push([m,0,u]);dist[u]=0;var divs=document.getElementsByClassName(\"nodes\");var alldivs=_toConsumableArray(divs);var _loop=function _loop(){st.sort(sortFunction);var now=st[0];st.shift();var v=now[2];var w=now[1];var z=now[0];console.log(z,w,v,getcoord(v),getcoord(dest));visit[v]=1;setTimeout(function(){return activateit2(alldivs,alldivs[v-1],v-1,speed*2,clr);},0);novst++;if(v===dest)return\"break\";var edges=adjlist.get(v);var _iterator2=_createForOfIteratorHelper(edges),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var to=_step2.value;var tmp=herucalc(v,dest);if(w+to[1]<dist[to[0]]){for(i=0;i<st.length;i++){if(st[i][1]===dist[to[0]]&&st[i][2]===to[0]){st.splice(i,1);}}dist[to[0]]=w+to[1];prev[to[0]]=v;st.push([dist[to[0]]+herucalc(to[0],dest),dist[to[0]],to[0]]);if(visit[to[0]]){propgateimprov(to[0],w,dist,prev,st,visit,dest);}}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}};while(st.length!=0){var i;var _ret=_loop();if(_ret===\"break\")break;}var path=[];var crawl=dest;path.push(crawl);while(prev[crawl]!=-1){path.push(prev[crawl]);totdst+=getweight(crawl,prev[crawl],adjlist);crawl=prev[crawl];}console.log(path);return[novst,totdst,path];};export var astar=function astar(speed,bmb){graph_init();var src=parseInt(document.getElementById(\"source\").parentNode.id.slice(4));var dst=parseInt(document.getElementById(\"dest\").parentNode.id.slice(4));var bomb;if(bmb){bomb=parseInt(document.getElementById(\"bomb\").parentNode.id.slice(4));var a,b;a=startAstar(src,bomb,speed,visited3);if(a[2][a[2].length-1]===src)b=startAstar(bomb,dst,speed,visited1);setTimeout(function(){return pathcolor(a[2],speed*2);},0);if(a[2][a[2].length-1]===src)setTimeout(function(){return pathcolor(b[2],speed*2);},0);var res;if(a[2][a[2].length-1]===src)res=[a[0]+b[0],a[1]+b[1]];else return[a[0],0];return res;}var ar=startAstar(src,dst,speed,visited1);setTimeout(function(){return pathcolor(ar[2],speed*2);},0);return ar;};","map":{"version":3,"sources":["/home/saikrupananda/vscode/LiveSites/Visualizer/Visualize/src/components/pathfinder/algorithms/astar.js"],"names":["wallnodeclr","normalborderclr","normalnodeclr","visited1","visited2","visited3","pathnodeclr","adjlist","graph_init","pathcolor","visitclr","getweight","sleep","activateit","callvisit","i","alldivs","speed","clr","setTimeout","callvisit2","getcoord","x","val","arr","Array","j","herucalc","a","b","first","last","hval","Math","abs","sortFunction","activateit2","propgateimprov","v","w","dist","prev","st","visit","dest","edges","get","to","length","splice","push","startAstar","u","fill","m","novst","totdst","divs","document","getElementsByClassName","sort","now","shift","z","console","log","tmp","path","crawl","astar","bmb","src","parseInt","getElementById","parentNode","id","slice","dst","bomb","res","ar"],"mappings":"wTAAA,OACEA,WADF,CAEEC,eAFF,CAGEC,aAHF,CAIEC,QAJF,CAKEC,QALF,CAMEC,QANF,CAOEC,WAPF,KAQO,WARP,CAUA,OACEC,OADF,CAEEC,UAFF,CAGEC,SAHF,CAIEC,QAJF,CAKEC,SALF,KAMO,aANP,CAOA,OAASC,KAAT,CAAgBC,UAAhB,KAAkC,eAAlC,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,CAAD,CAAIC,OAAJ,CAAaC,KAAb,CAAoBC,GAApB,CAA4B,CAC5CC,UAAU,CAAC,UAAM,CACfT,QAAQ,CAACK,CAAD,CAAIC,OAAJ,CAAaC,KAAb,CAAoBC,GAApB,CAAR,CACD,CAFS,CAEP,CAFO,CAAV,CAGA;AACD,CALD,CAOA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACL,CAAD,CAAIC,OAAJ,CAAaC,KAAb,CAAoBC,GAApB,CAA4B,CAC7CC,UAAU,CAAC,UAAM,CACfL,SAAS,CAACC,CAAD,CAAIC,OAAJ,CAAaC,KAAb,CAAoBC,GAApB,CAAT,CACD,CAFS,CAEP,CAFO,CAAV,CAGA;AACD,CALD,CAOA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtB,GAAIC,CAAAA,GAAG,CAAG,CAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,KAAJ,CAAU,CAAV,CAAV,CACA,IAAK,GAAIV,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,EAApB,CAAwBA,CAAC,EAAzB,CAA6B,CAC3B,IAAK,GAAIW,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,EAApB,CAAwBA,CAAC,EAAzB,CAA6B,CAC3BH,GAAG,GACH,GAAIA,GAAG,EAAID,CAAX,CAAc,CACZE,GAAG,CAAC,CAAD,CAAH,CAAST,CAAT,CACAS,GAAG,CAAC,CAAD,CAAH,CAASE,CAAT,CACA,MAAOF,CAAAA,GAAP,CACD,CACF,CACF,CACF,CAbD,CAeA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAIC,CAAJ,CAAU,CACzB,GAAIC,CAAAA,KAAK,CAAGT,QAAQ,CAACO,CAAD,CAApB,CACA,GAAIG,CAAAA,IAAI,CAAGV,QAAQ,CAACQ,CAAD,CAAnB,CACA,GAAIG,CAAAA,IAAI,CAAGC,IAAI,CAACC,GAAL,CAASH,IAAI,CAAC,CAAD,CAAJ,CAAUD,KAAK,CAAC,CAAD,CAAxB,EAA+BG,IAAI,CAACC,GAAL,CAASH,IAAI,CAAC,CAAD,CAAJ,CAAUD,KAAK,CAAC,CAAD,CAAxB,CAA1C,CACA,MAAOE,CAAAA,IAAP,CACD,CALD,CAOA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACP,CAAD,CAAIC,CAAJ,CAAU,CAC7B,GAAID,CAAC,CAAC,CAAD,CAAD,GAASC,CAAC,CAAC,CAAD,CAAd,CAAmB,CACjB,MAAO,EAAP,CACD,CAFD,IAEO,CACL,MAAOD,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAOC,CAAC,CAAC,CAAD,CAAR,CAAc,CAAC,CAAf,CAAmB,CAA1B,CACD,CACF,CAND,CAQA,GAAMO,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACpB,OAAD,CAAUO,GAAV,CAAeR,CAAf,CAAkBE,KAAlB,CAAyBC,GAAzB,CAAiC,CACnDC,UAAU,CAAC,iBAAMN,CAAAA,UAAU,CAACG,OAAD,CAAUO,GAAV,CAAhB,EAAD,CAAiC,CAAjC,CAAV,CACAJ,UAAU,CAAC,iBAAML,CAAAA,SAAS,CAACC,CAAD,CAAIC,OAAJ,CAAaC,KAAb,CAAoBC,GAApB,CAAf,EAAD,CAA0C,CAA1C,CAAV,CACD,CAHD,CAKA,GAAMmB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAAIC,CAAJ,CAAOC,IAAP,CAAaC,IAAb,CAAmBC,EAAnB,CAAuBC,KAAvB,CAA8BC,IAA9B,CAAuC,CAC5D,GAAIC,CAAAA,KAAK,CAAGtC,OAAO,CAACuC,GAAR,CAAYR,CAAZ,CAAZ,CAD4D,yCAE7CO,KAF6C,YAE5D,+CAAsB,IAAbE,CAAAA,EAAa,aACpB,GAAIR,CAAC,CAAGQ,EAAE,CAAC,CAAD,CAAN,CAAYP,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAApB,CAA6B,CAC3B,IAAK,GAAIhC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG2B,EAAE,CAACM,MAAvB,CAA+BjC,CAAC,EAAhC,CAAoC,CAClC,GAAI2B,EAAE,CAAC3B,CAAD,CAAF,CAAM,CAAN,IAAayB,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAAjB,EAA4BL,EAAE,CAAC3B,CAAD,CAAF,CAAM,CAAN,IAAagC,EAAE,CAAC,CAAD,CAA/C,CAAoD,CAClDL,EAAE,CAACO,MAAH,CAAUlC,CAAV,CAAa,CAAb,EACD,CACF,CACDyB,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAAJ,CAAcR,CAAC,CAAGQ,EAAE,CAAC,CAAD,CAApB,CACAN,IAAI,CAACM,EAAE,CAAC,CAAD,CAAH,CAAJ,CAAcT,CAAd,CACAI,EAAE,CAACQ,IAAH,CAAQ,CAACV,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAAJ,CAAcpB,QAAQ,CAACoB,EAAE,CAAC,CAAD,CAAH,CAAQH,IAAR,CAAvB,CAAsCJ,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAA1C,CAAmDA,EAAE,CAAC,CAAD,CAArD,CAAR,EACA,GAAIJ,KAAK,CAACI,EAAE,CAAC,CAAD,CAAH,CAAT,CAAkB,CAChBV,cAAc,CAACU,EAAE,CAAC,CAAD,CAAH,CAAQR,CAAR,CAAWC,IAAX,CAAiBC,IAAjB,CAAuBC,EAAvB,CAA2BC,KAA3B,CAAkCC,IAAlC,CAAd,CACD,CACF,CACF,CAhB2D,qDAiB7D,CAjBD,CAmBA,GAAMO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAIR,IAAJ,CAAU3B,KAAV,CAAiBC,GAAjB,CAAyB,CAC1C,GAAIsB,CAAAA,IAAI,CAAG,GAAIf,CAAAA,KAAJ,CAAU,IAAV,EAAgB4B,IAAhB,CAAqB,KAArB,CAAX,CACA,GAAIZ,CAAAA,IAAI,CAAG,GAAIhB,CAAAA,KAAJ,CAAU,IAAV,EAAgB4B,IAAhB,CAAqB,CAAC,CAAtB,CAAX,CACA,GAAIV,CAAAA,KAAK,CAAG,GAAIlB,CAAAA,KAAJ,CAAU,IAAV,EAAgB4B,IAAhB,CAAqB,CAArB,CAAZ,CACA,GAAIC,CAAAA,CAAC,CAAG3B,QAAQ,CAACyB,CAAD,CAAIR,IAAJ,CAAhB,CACA,GAAIF,CAAAA,EAAE,CAAG,EAAT,CACA,GAAIa,CAAAA,KAAK,CAAG,CAAZ,CACA,GAAIC,CAAAA,MAAM,CAAG,CAAb,CACAd,EAAE,CAACQ,IAAH,CAAQ,CAACI,CAAD,CAAI,CAAJ,CAAOF,CAAP,CAAR,EACAZ,IAAI,CAACY,CAAD,CAAJ,CAAU,CAAV,CACA,GAAIK,CAAAA,IAAI,CAAGC,QAAQ,CAACC,sBAAT,CAAgC,OAAhC,CAAX,CACA,GAAI3C,CAAAA,OAAO,oBAAOyC,IAAP,CAAX,CAX0C,2BAcxCf,EAAE,CAACkB,IAAH,CAAQzB,YAAR,EACA,GAAI0B,CAAAA,GAAG,CAAGnB,EAAE,CAAC,CAAD,CAAZ,CACAA,EAAE,CAACoB,KAAH,GAEA,GAAIxB,CAAAA,CAAC,CAAGuB,GAAG,CAAC,CAAD,CAAX,CACA,GAAItB,CAAAA,CAAC,CAAGsB,GAAG,CAAC,CAAD,CAAX,CACA,GAAIE,CAAAA,CAAC,CAAGF,GAAG,CAAC,CAAD,CAAX,CACAG,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAexB,CAAf,CAAkBD,CAAlB,CAAqBjB,QAAQ,CAACiB,CAAD,CAA7B,CAAkCjB,QAAQ,CAACuB,IAAD,CAA1C,EACAD,KAAK,CAACL,CAAD,CAAL,CAAW,CAAX,CACAnB,UAAU,CACR,iBAAMiB,CAAAA,WAAW,CAACpB,OAAD,CAAUA,OAAO,CAACsB,CAAC,CAAG,CAAL,CAAjB,CAA0BA,CAAC,CAAG,CAA9B,CAAiCrB,KAAK,CAAG,CAAzC,CAA4CC,GAA5C,CAAjB,EADQ,CAER,CAFQ,CAAV,CAIAqC,KAAK,GACL,GAAIjB,CAAC,GAAKM,IAAV,CAAgB,cAEhB,GAAIC,CAAAA,KAAK,CAAGtC,OAAO,CAACuC,GAAR,CAAYR,CAAZ,CAAZ,CA9BwC,0CA+BzBO,KA/ByB,aA+BxC,kDAAsB,IAAbE,CAAAA,EAAa,cACpB,GAAImB,CAAAA,GAAG,CAAGvC,QAAQ,CAACW,CAAD,CAAIM,IAAJ,CAAlB,CACA,GAAIL,CAAC,CAAGQ,EAAE,CAAC,CAAD,CAAN,CAAYP,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAApB,CAA6B,CAC3B,IAAShC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG2B,EAAE,CAACM,MAAvB,CAA+BjC,CAAC,EAAhC,CAAoC,CAClC,GAAI2B,EAAE,CAAC3B,CAAD,CAAF,CAAM,CAAN,IAAayB,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAAjB,EAA4BL,EAAE,CAAC3B,CAAD,CAAF,CAAM,CAAN,IAAagC,EAAE,CAAC,CAAD,CAA/C,CAAoD,CAClDL,EAAE,CAACO,MAAH,CAAUlC,CAAV,CAAa,CAAb,EACD,CACF,CACDyB,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAAJ,CAAcR,CAAC,CAAGQ,EAAE,CAAC,CAAD,CAApB,CACAN,IAAI,CAACM,EAAE,CAAC,CAAD,CAAH,CAAJ,CAAcT,CAAd,CACAI,EAAE,CAACQ,IAAH,CAAQ,CAACV,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAAJ,CAAcpB,QAAQ,CAACoB,EAAE,CAAC,CAAD,CAAH,CAAQH,IAAR,CAAvB,CAAsCJ,IAAI,CAACO,EAAE,CAAC,CAAD,CAAH,CAA1C,CAAmDA,EAAE,CAAC,CAAD,CAArD,CAAR,EACA,GAAIJ,KAAK,CAACI,EAAE,CAAC,CAAD,CAAH,CAAT,CAAkB,CAChBV,cAAc,CAACU,EAAE,CAAC,CAAD,CAAH,CAAQR,CAAR,CAAWC,IAAX,CAAiBC,IAAjB,CAAuBC,EAAvB,CAA2BC,KAA3B,CAAkCC,IAAlC,CAAd,CACD,CACF,CACF,CA9CuC,yDAa1C,MAAOF,EAAE,CAACM,MAAH,EAAa,CAApB,CAAuB,IAqBRjC,CAAAA,CArBQ,oCAeL,MAmBjB,CACD,GAAIoD,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,KAAK,CAAGxB,IAAZ,CACAuB,IAAI,CAACjB,IAAL,CAAUkB,KAAV,EACA,MAAO3B,IAAI,CAAC2B,KAAD,CAAJ,EAAe,CAAC,CAAvB,CAA0B,CACxBD,IAAI,CAACjB,IAAL,CAAUT,IAAI,CAAC2B,KAAD,CAAd,EACAZ,MAAM,EAAI7C,SAAS,CAACyD,KAAD,CAAQ3B,IAAI,CAAC2B,KAAD,CAAZ,CAAqB7D,OAArB,CAAnB,CACA6D,KAAK,CAAG3B,IAAI,CAAC2B,KAAD,CAAZ,CACD,CACDJ,OAAO,CAACC,GAAR,CAAYE,IAAZ,EACA,MAAO,CAACZ,KAAD,CAAQC,MAAR,CAAgBW,IAAhB,CAAP,CACD,CA1DD,CA4DA,MAAO,IAAME,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACpD,KAAD,CAAQqD,GAAR,CAAgB,CACnC9D,UAAU,GACV,GAAI+D,CAAAA,GAAG,CAAGC,QAAQ,CAACd,QAAQ,CAACe,cAAT,CAAwB,QAAxB,EAAkCC,UAAlC,CAA6CC,EAA7C,CAAgDC,KAAhD,CAAsD,CAAtD,CAAD,CAAlB,CACA,GAAIC,CAAAA,GAAG,CAAGL,QAAQ,CAACd,QAAQ,CAACe,cAAT,CAAwB,MAAxB,EAAgCC,UAAhC,CAA2CC,EAA3C,CAA8CC,KAA9C,CAAoD,CAApD,CAAD,CAAlB,CACA,GAAIE,CAAAA,IAAJ,CACA,GAAIR,GAAJ,CAAS,CACPQ,IAAI,CAAGN,QAAQ,CAACd,QAAQ,CAACe,cAAT,CAAwB,MAAxB,EAAgCC,UAAhC,CAA2CC,EAA3C,CAA8CC,KAA9C,CAAoD,CAApD,CAAD,CAAf,CACA,GAAIhD,CAAAA,CAAJ,CAAOC,CAAP,CACAD,CAAC,CAAGuB,UAAU,CAACoB,GAAD,CAAMO,IAAN,CAAY7D,KAAZ,CAAmBZ,QAAnB,CAAd,CACA,GAAIuB,CAAC,CAAC,CAAD,CAAD,CAAKA,CAAC,CAAC,CAAD,CAAD,CAAKoB,MAAL,CAAc,CAAnB,IAA0BuB,GAA9B,CACE1C,CAAC,CAAGsB,UAAU,CAAC2B,IAAD,CAAOD,GAAP,CAAY5D,KAAZ,CAAmBd,QAAnB,CAAd,CACFgB,UAAU,CAAC,iBAAMV,CAAAA,SAAS,CAACmB,CAAC,CAAC,CAAD,CAAF,CAAOX,KAAK,CAAG,CAAf,CAAf,EAAD,CAAmC,CAAnC,CAAV,CACA,GAAIW,CAAC,CAAC,CAAD,CAAD,CAAKA,CAAC,CAAC,CAAD,CAAD,CAAKoB,MAAL,CAAc,CAAnB,IAA0BuB,GAA9B,CACEpD,UAAU,CAAC,iBAAMV,CAAAA,SAAS,CAACoB,CAAC,CAAC,CAAD,CAAF,CAAOZ,KAAK,CAAG,CAAf,CAAf,EAAD,CAAmC,CAAnC,CAAV,CACF,GAAI8D,CAAAA,GAAJ,CACA,GAAInD,CAAC,CAAC,CAAD,CAAD,CAAKA,CAAC,CAAC,CAAD,CAAD,CAAKoB,MAAL,CAAc,CAAnB,IAA0BuB,GAA9B,CAAmCQ,GAAG,CAAG,CAACnD,CAAC,CAAC,CAAD,CAAD,CAAOC,CAAC,CAAC,CAAD,CAAT,CAAcD,CAAC,CAAC,CAAD,CAAD,CAAOC,CAAC,CAAC,CAAD,CAAtB,CAAN,CAAnC,IACK,OAAO,CAACD,CAAC,CAAC,CAAD,CAAF,CAAO,CAAP,CAAP,CACL,MAAOmD,CAAAA,GAAP,CACD,CACD,GAAIC,CAAAA,EAAE,CAAG7B,UAAU,CAACoB,GAAD,CAAMM,GAAN,CAAW5D,KAAX,CAAkBd,QAAlB,CAAnB,CACAgB,UAAU,CAAC,iBAAMV,CAAAA,SAAS,CAACuE,EAAE,CAAC,CAAD,CAAH,CAAQ/D,KAAK,CAAG,CAAhB,CAAf,EAAD,CAAoC,CAApC,CAAV,CACA,MAAO+D,CAAAA,EAAP,CACD,CAtBM","sourcesContent":["import {\n  wallnodeclr,\n  normalborderclr,\n  normalnodeclr,\n  visited1,\n  visited2,\n  visited3,\n  pathnodeclr,\n} from \"../colors\";\n\nimport {\n  adjlist,\n  graph_init,\n  pathcolor,\n  visitclr,\n  getweight,\n} from \"./gridsetup\";\nimport { sleep, activateit } from \"../clearfuncs\";\n\nconst callvisit = (i, alldivs, speed, clr) => {\n  setTimeout(() => {\n    visitclr(i, alldivs, speed, clr);\n  }, 0);\n  // sleep(20);\n};\n\nconst callvisit2 = (i, alldivs, speed, clr) => {\n  setTimeout(() => {\n    callvisit(i, alldivs, speed, clr);\n  }, 0);\n  // sleep(20);\n};\n\nconst getcoord = (x) => {\n  let val = 0;\n  let arr = new Array(2);\n  for (let i = 0; i < 29; i++) {\n    for (let j = 0; j < 71; j++) {\n      val++;\n      if (val == x) {\n        arr[0] = i;\n        arr[1] = j;\n        return arr;\n      }\n    }\n  }\n};\n\nconst herucalc = (a, b) => {\n  let first = getcoord(a);\n  let last = getcoord(b);\n  let hval = Math.abs(last[1] - first[1]) + Math.abs(last[0] - first[0]);\n  return hval;\n};\n\nconst sortFunction = (a, b) => {\n  if (a[0] === b[0]) {\n    return 0;\n  } else {\n    return a[0] < b[0] ? -1 : 1;\n  }\n};\n\nconst activateit2 = (alldivs, val, i, speed, clr) => {\n  setTimeout(() => activateit(alldivs, val), 0);\n  setTimeout(() => callvisit(i, alldivs, speed, clr), 0);\n};\n\nconst propgateimprov = (v, w, dist, prev, st, visit, dest) => {\n  let edges = adjlist.get(v);\n  for (let to of edges) {\n    if (w + to[1] < dist[to[0]]) {\n      for (var i = 0; i < st.length; i++) {\n        if (st[i][1] === dist[to[0]] && st[i][2] === to[0]) {\n          st.splice(i, 1);\n        }\n      }\n      dist[to[0]] = w + to[1];\n      prev[to[0]] = v;\n      st.push([dist[to[0]] + herucalc(to[0], dest), dist[to[0]], to[0]]);\n      if (visit[to[0]]) {\n        propgateimprov(to[0], w, dist, prev, st, visit, dest);\n      }\n    }\n  }\n};\n\nconst startAstar = (u, dest, speed, clr) => {\n  let dist = new Array(2100).fill(50000);\n  let prev = new Array(2100).fill(-1);\n  let visit = new Array(2100).fill(0);\n  let m = herucalc(u, dest);\n  let st = [];\n  let novst = 0;\n  let totdst = 0;\n  st.push([m, 0, u]);\n  dist[u] = 0;\n  let divs = document.getElementsByClassName(\"nodes\");\n  let alldivs = [...divs];\n\n  while (st.length != 0) {\n    st.sort(sortFunction);\n    let now = st[0];\n    st.shift();\n\n    let v = now[2];\n    let w = now[1];\n    let z = now[0];\n    console.log(z, w, v, getcoord(v), getcoord(dest));\n    visit[v] = 1;\n    setTimeout(\n      () => activateit2(alldivs, alldivs[v - 1], v - 1, speed * 2, clr),\n      0\n    );\n    novst++;\n    if (v === dest) break;\n\n    let edges = adjlist.get(v);\n    for (let to of edges) {\n      let tmp = herucalc(v, dest);\n      if (w + to[1] < dist[to[0]]) {\n        for (var i = 0; i < st.length; i++) {\n          if (st[i][1] === dist[to[0]] && st[i][2] === to[0]) {\n            st.splice(i, 1);\n          }\n        }\n        dist[to[0]] = w + to[1];\n        prev[to[0]] = v;\n        st.push([dist[to[0]] + herucalc(to[0], dest), dist[to[0]], to[0]]);\n        if (visit[to[0]]) {\n          propgateimprov(to[0], w, dist, prev, st, visit, dest);\n        }\n      }\n    }\n  }\n  let path = [];\n  let crawl = dest;\n  path.push(crawl);\n  while (prev[crawl] != -1) {\n    path.push(prev[crawl]);\n    totdst += getweight(crawl, prev[crawl], adjlist);\n    crawl = prev[crawl];\n  }\n  console.log(path);\n  return [novst, totdst, path];\n};\n\nexport const astar = (speed, bmb) => {\n  graph_init();\n  let src = parseInt(document.getElementById(\"source\").parentNode.id.slice(4));\n  let dst = parseInt(document.getElementById(\"dest\").parentNode.id.slice(4));\n  let bomb;\n  if (bmb) {\n    bomb = parseInt(document.getElementById(\"bomb\").parentNode.id.slice(4));\n    let a, b;\n    a = startAstar(src, bomb, speed, visited3);\n    if (a[2][a[2].length - 1] === src)\n      b = startAstar(bomb, dst, speed, visited1);\n    setTimeout(() => pathcolor(a[2], speed * 2), 0);\n    if (a[2][a[2].length - 1] === src)\n      setTimeout(() => pathcolor(b[2], speed * 2), 0);\n    let res;\n    if (a[2][a[2].length - 1] === src) res = [a[0] + b[0], a[1] + b[1]];\n    else return [a[0], 0];\n    return res;\n  }\n  let ar = startAstar(src, dst, speed, visited1);\n  setTimeout(() => pathcolor(ar[2], speed * 2), 0);\n  return ar;\n};\n"]},"metadata":{},"sourceType":"module"}